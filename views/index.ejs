<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include("partials/head") %>
  </head>
  <body>
    <div class="appContainer">
      <%- include("partials/header") %>
      <main>
        <% if (locals.user) {%>
        <div class="userHomepage">
          <h1>Welcome Back <%= user.firstname %>!</h1>
          <h2>Your Messages:</h2>
          <% if (messages.length === 0) { %>
          <h1>No messages available. Create a new message to view here!</h1>
          <% } else { %>
          <div class="messagesContainer">
            <% messages.forEach((message) => { %>
            <div class="message">
              <a
                class="deleteBtn"
                href="/messages/<%= message.id %>/delete"
              >
                <%- include("partials/deleteBtn") %>
              </a>
              <b class="messageTitle"><%= message.title %></b>
              <p class="messageDescription"><%= message.description %></p>
              <div class="dateAdded">
                <b>Posted on</b>: <%= message.created_at.getDate()%>-<%=
                message.created_at.getMonth()+1 %>-<%=
                message.created_at.getFullYear() %>
              </div>
            </div>
            <% }) %>
          </div>
          <% } %>
        </div>
        <% } else { %>
        <div class="description">
          <p>
            Unlock the secrets of an exclusive community where only members can
            see who's behind the messages. Join the conversation, share your
            thoughts, and connect with others—but remember, not everything is
            visible to the public eye.
          </p>

          <h2>What Makes This Community Special?</h2>
          <p>
            <b>Exclusive Content</b>: Only logged-in members can see the authors
            of posts. Guests can read messages but won't know who wrote them.
          </p>
          <p>
            <b>Share Your Thoughts</b>: Post your own messages and join the
            discussion.
          </p>
          <p>
            <b>Become a Member</b>: Sign up today to unlock the full experience
            and see who's behind the posts.
          </p>
          <h2>How It Works</h2>
          <p>
            <b>Members</b>: Log in to reveal the authors and post your own
            messages.
          </p>
          <p>
            <b>Admins</b>: Manage the community and ensure everything runs
            smoothly.
          </p>
          <h2>Join the Community</h2>
          <p>
            Ready to dive in? <a href="/sign-up">Sign up</a> to become a member
            or <a href="/login">log in</a> if you're already part of the club.
            Let's build a space where everyone can share freely—but only members
            know the full story.
          </p>
        </div>
        <%}%>
      </main>
    </div>
  </body>
</html>
